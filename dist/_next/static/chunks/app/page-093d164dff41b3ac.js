(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1310:(e,t,n)=>{Promise.resolve().then(n.bind(n,6872))},5566:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var o=n(5453),i=n(6786);let s=(0,o.v)()((0,i.Zr)(e=>({token:"",isAuthenticated:!1,setToken:t=>e({token:t,isAuthenticated:!!t}),clearToken:()=>e({token:"",isAuthenticated:!1})}),{name:"auth-store",storage:(0,i.KU)(()=>localStorage)}))},6872:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>N});var o=n(5155),i=n(1158),s=n(6801),a=n(4256),l=n(3541),r=n(3339),d=n(9488),c=n(5358),x=n(9373),p=n(5041),u=n(5566),h=n(7590);function f(){let{token:e}=(0,u.A)();async function t(){let t=await fetch("https://note-sigma-black.vercel.app/api/v1/notes",{method:"GET",headers:e?{token:"3b8ny__".concat(e)}:{}});return await t.json()}let n=(0,x.I)({queryKey:["getUserNotes"],queryFn:t,enabled:!!e});async function o(t){let n=fetch("https://note-sigma-black.vercel.app/api/v1/notes",{method:"POST",body:JSON.stringify(t),headers:e?{"Content-type":"application/json",token:"3b8ny__".concat(e)}:{}});return(await n).json()}let i=(0,p.n)({mutationFn:o,onMutate:e=>{var t;let{title:n,content:o}=e,i=h.U.getQueryData(["getUserNotes"]);h.U.setQueryData(["getUserNotes"],{...i,notes:[...null!==(t=null==i?void 0:i.notes)&&void 0!==t?t:[],{title:n,content:o,_id:0}]})},onError:e=>{console.log(e)}});async function s(t){let{values:n,noteId:o}=t,i=fetch("https://note-sigma-black.vercel.app/api/v1/notes/".concat(o),{method:"PUT",body:JSON.stringify(n),headers:e?{"Content-type":"application/json",token:"3b8ny__".concat(e)}:{}});return(await i).json()}async function a(t){fetch("https://note-sigma-black.vercel.app/api/v1/notes/".concat(t),{method:"DELETE",headers:e?{"Content-type":"application/json",token:"3b8ny__".concat(e)}:{}})}return{notesData:n,addResponse:i,updateResponse:(0,p.n)({mutationFn:s,onMutate:e=>{var t;let{values:n,noteId:o}=e,i=h.U.getQueryData(["getUserNotes"]),s=null==i?void 0:null===(t=i.notes)||void 0===t?void 0:t.findIndex(e=>e._id===o),a=structuredClone(i);a&&void 0!==s&&(a.notes[s].title=n.title,a.notes[s].content=n.content),h.U.setQueryData(["getUserNotes"],null!=a?a:i)},onError:e=>{console.log(e)}}),deleteResponse:(0,p.n)({mutationFn:a,onMutate:e=>{let t=h.U.getQueryData(["getUserNotes"]),n=null==t?void 0:t.notes.filter(t=>t._id!==e);h.U.setQueryData(["getUserNotes"],{...t,notes:[...null!=n?n:[]]})},onError:e=>{console.log(e)}})}}var g=n(2940),m=n.n(g),j=n(2115),y=n(6440);function b(e){let{setReading:t,note:n}=e;return(0,o.jsx)(s.A,{sx:{position:"fixed",inset:"0",backgroundColor:"#f9f9f9",display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",zIndex:"999999"},children:(0,o.jsxs)(s.A,{sx:{width:"50%",boxShadow:"rgba(0, 0, 0, 0.1) 0px 1px 3px 0px, rgba(0, 0, 0, 0.06) 0px 1px 2px 0px;",paddingBlock:"0 50px",backgroundColor:"#fff",borderRadius:"30px"},children:[(0,o.jsx)(s.A,{sx:{backgroundColor:"#3f50b5",widht:"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 0px",borderRadius:"30px 30px 0 0",marginBottom:"20px"},children:(0,o.jsx)(c.A,{className:"subLogo",sx:{margin:"auto"},children:"NOTIFY"})}),(0,o.jsx)(s.A,{component:"form",noValidate:!0,autoComplete:"off",width:"100%",sx:{position:"relative",zIndex:"9999",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:(0,o.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"start",width:"70%",gap:"30px"},children:[(0,o.jsx)(y.A,{id:"content",name:"content",label:"Note",multiline:!0,rows:20,variant:"outlined",sx:{width:"100%",backgroundColor:"#fff"},value:n.content}),(0,o.jsx)(s.A,{sx:{display:"flex",gap:"15px",paddingRight:"30px",width:"100%",justifyContent:"space-between"},children:(0,o.jsx)(d.A,{onClick:()=>{t(!1)},children:"Exit"})})]})})]})})}var A=n(9694),C=n(6874),v=n.n(C),k=n(5695);function w(e){let{editing:t,setEditing:n,note:i}=e,{addResponse:a,updateResponse:l}=f(),{handleSubmit:r,handleChange:x,values:p,setValues:h}=(0,A.Wx)({initialValues:{title:"",content:""},onSubmit:e=>{t?l.mutate({values:e,noteId:i._id}):a.mutate(e)}}),g=(0,u.A)(),m=!!g.token,b=(0,k.useRouter)();return(0,j.useEffect)(()=>{t&&i&&h({title:i.title,content:i.content})},[t,i,h]),(0,o.jsxs)(s.A,{sx:{boxShadow:"rgba(0, 0, 0, 0.1) 0px 1px 3px 0px, rgba(0, 0, 0, 0.06) 0px 1px 2px 0px;",paddingBlock:"0 50px",backgroundColor:"#fff",borderRadius:"30px"},children:[(0,o.jsx)(s.A,{sx:{backgroundColor:"#3f50b5",widht:"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 0px",borderRadius:"30px 30px 0 0",marginBottom:"20px"},children:(0,o.jsx)(c.A,{className:"subLogo",sx:{margin:"auto"},children:"NOTELY"})}),(0,o.jsx)(s.A,{component:"form",noValidate:!0,autoComplete:"off",width:"100%",onSubmit:r,sx:{position:"relative",zIndex:"9999",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:(0,o.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"start",width:"70%",gap:"30px"},children:[(0,o.jsx)(y.A,{id:"title",name:"title",label:"Note Title",variant:"outlined",value:p.title,onChange:x,sx:{width:"50%",backgroundColor:"#fff"}}),(0,o.jsx)(y.A,{id:"content",name:"content",label:"Note",multiline:!0,rows:20,variant:"outlined",sx:{width:"100%",backgroundColor:"#fff"},value:p.content,onChange:x}),(0,o.jsx)(s.A,{sx:{display:"flex",gap:"15px",paddingRight:"30px",width:"100%",justifyContent:"space-between"},children:m?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.A,{sx:{display:"flex",gap:"20px"},children:[(0,o.jsx)(d.A,{id:"submit",type:"submit",sx:{padding:"10px 30px",backgroundColor:"#121212",color:"#fff"},disabled:a.isPending,children:t?"Update":"Add"}),t&&(0,o.jsx)(d.A,{onClick:()=>{h({title:"",content:""}),n(!1)},sx:{alignSelf:"start",padding:"10px 30px",backgroundColor:"#121212",color:"#fff"},children:"Cancel"})]}),(0,o.jsx)(d.A,{sx:{color:"#f50057"},onClick:()=>{g.clearToken(),b.push("/")},children:(0,o.jsx)(c.A,{sx:{color:"inherit",textDecoration:"none"},children:"Logout"})})]}):(0,o.jsxs)(s.A,{children:[(0,o.jsx)(v(),{href:"/login",children:(0,o.jsx)(c.A,{sx:{color:"inherit",textDecoration:"none"},children:"Login"})}),(0,o.jsx)(v(),{href:"/signup",children:(0,o.jsx)(c.A,{sx:{color:"inherit",textDecoration:"none"},children:"Sign up"})})]})})]})})]})}function _(){let{notesData:{data:e},deleteResponse:t,addResponse:n}=f(),[i,x]=(0,j.useState)(!1),[p,u]=(0,j.useState)({title:"",content:"",createdAt:"",createdBy:"",_id:"",updatedAt:"",__v:0}),[h,g]=(0,j.useState)(!1),y=e=>{x(!0),u(e)},A=e=>{g(!0),u(e)},C=e=>{t.mutate(e)};return(0,o.jsxs)(o.Fragment,{children:[h&&(0,o.jsx)(b,{reading:h,setReading:g,note:p,setNote:u}),(0,o.jsx)(w,{setEditing:x,editing:i,note:p,setNote:u}),(null==e?void 0:e.notes)?(0,o.jsx)(s.A,{sx:{width:"100%",display:"flex",justifyContent:"start",alignItems:"start",flexWrap:"wrap",gap:"20px",marginTop:"50px"},children:e.notes.map(e=>(0,o.jsxs)(a.A,{sx:{minWidth:275,maxWidth:275},children:[(0,o.jsxs)(r.A,{children:[(0,o.jsxs)(c.A,{gutterBottom:!0,sx:{color:"text.secondary",fontSize:14,display:"flex",justifyContent:"space-between"},children:[(0,o.jsxs)("span",{style:{textTransform:"capitalize"},children:[" ",e.title]}),(0,o.jsx)("span",{children:m()(e.createdAt).format("LL")})]}),(0,o.jsx)(c.A,{variant:"body2",children:e.content})]}),(0,o.jsxs)(l.A,{children:[(0,o.jsx)(d.A,{size:"small",onClick:()=>A(e),children:"Read"}),(0,o.jsx)(d.A,{size:"small",sx:{color:"green"},onClick:()=>y(e),children:"Edit"}),(0,o.jsx)(d.A,{size:"small",sx:{color:"red"},onClick:()=>C(e._id),disabled:n.isPending,children:"Delete"})]})]},e._id))}):""]})}function N(){let e=(0,u.A)(),t=(0,k.useRouter)();return(0,j.useEffect)(()=>{e.isAuthenticated||t.push("/login")},[e.isAuthenticated,t]),(0,o.jsx)(i.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:"20px",gap:"40px"},children:(0,o.jsx)(s.A,{sx:{width:"85%"},children:(0,o.jsx)(_,{})})})}},7590:(e,t,n)=>{"use strict";n.d(t,{TanStackProvider:()=>l,U:()=>a});var o=n(5155),i=n(7017),s=n(6715);let a=new i.E,l=e=>{let{children:t}=e;return(0,o.jsx)(s.Ht,{client:a,children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[586,197,292,766,17,874,634,56,441,684,358],()=>t(1310)),_N_E=e.O()}]);